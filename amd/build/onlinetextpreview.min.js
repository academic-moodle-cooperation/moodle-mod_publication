/**
 * JS showing detailed infos about user's approval status for group approvals in a modal window
 *
 * @module        mod_publication/onlinetextpreview
 * @package
 * @author        Philipp Hager
 * @copyright     2020 Academic Moodle Cooperation {@link http://www.academic-moodle-cooperation.org}
 * @license       http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_publication/onlinetextpreview",["jquery","core/modal_factory","core/str","core/ajax","core/log","core/notification"],(function($,ModalFactory,str,ajax,log,notification){var instance=new function(){this.cmid=""};return instance.initializer=function(config){instance.cmid=config.cmid,log.info("Initialize onlinetextpreview JS!","mod_publication"),instance.modal||(instance.modalpromise=ModalFactory.create({type:ModalFactory.types.DEFAULT,large:!0})),str.get_strings([{key:"preview",component:"core"},{key:"onlinetextfilename",component:"assignsubmission_onlinetext"},{key:"from",component:"core"}]).done((function(s){log.info("Done loading strings...","mod_publication"),instance.modalpromise.done((function(modal){log.info("Done preparing modal","mod_publication"),instance.modal=modal,$(".path-mod-publication table.publications .onlinetextpreview *").click((function(e){e.stopPropagation(),e.preventDefault();var itemid,dataelement=$(e.target).parent();try{itemid=dataelement.data("itemid")}catch(ex){notification.exception(ex)}ajax.call([{methodname:"mod_publication_get_onlinetextpreview",args:{itemid:itemid,cmid:instance.cmid},done:function(data){var itemname="";dataelement.data("itemname").length&&(itemname=" "+s[2].toLowerCase()+" "+dataelement.data("itemname")),instance.modal.setTitle(s[0]+" "+s[1]+itemname),instance.modal.setBody(data),instance.modal.show()},fail:function(ex){notification.exception(ex)}}])}))}))})).fail((function(ex){log.error("Error getting strings: "+ex,"mod_publication")}))},instance}));

//# sourceMappingURL=onlinetextpreview.min.js.map