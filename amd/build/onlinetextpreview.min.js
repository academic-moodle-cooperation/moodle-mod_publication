define ("mod_publication/onlinetextpreview",["jquery","core/modal_factory","core/str","core/ajax","core/log","core/notification"],function(a,b,c,d,e,f){var g=new function Onlinetextpreview(){this.cmid=""};g.initializer=function(h){g.cmid=h.cmid;e.info("Initialize onlinetextpreview JS!","mod_publication");if(!g.modal){g.modalpromise=b.create({type:b.types.DEFAULT,large:!0})}c.get_strings([{key:"preview",component:"core"},{key:"onlinetextfilename",component:"assignsubmission_onlinetext"},{key:"from",component:"core"}]).done(function(b){e.info("Done loading strings...","mod_publication");g.modalpromise.done(function(c){e.info("Done preparing modal","mod_publication");g.modal=c;a(".path-mod-publication table.publications .onlinetextpreview *").click(function(c){c.stopPropagation();c.preventDefault();var e=a(c.target),h=e.parent(),i;try{i=h.data("itemid")}catch(a){f.exception(a)}d.call([{methodname:"mod_publication_get_onlinetextpreview",args:{itemid:i,cmid:g.cmid},done:function done(a){var c="";if(h.data("itemname").length){c=" "+b[2].toLowerCase()+" "+h.data("itemname")}g.modal.setTitle(b[0]+" "+b[1]+c);g.modal.setBody(a);g.modal.show()},fail:function fail(a){f.exception(a)}}])})})}).fail(function(a){e.error("Error getting strings: "+a,"mod_publication")})};return g});
//# sourceMappingURL=onlinetextpreview.min.js.map
